<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <!-- Meta tags for social media banners, these should be filled in appropriatly as they are your "business card" -->
  <!-- Replace the content tag with appropriate information -->
  <meta name="description" content="Project Page of GenAgent">
  <meta property="og:title" content="GenAgent" />
  <meta property="og:description" content="Project Page of GenAgent" />
  <meta property="og:url" content="https://xxyqwq.github.io/GenAgent" />
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X630-->
  <!-- <meta property="og:image" content="static/images/banner.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" /> -->

  <meta name="twitter:title" content="GenAgent">
  <meta name="twitter:description" content="Project Page of GenAgent">
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X600-->
  <!-- <meta name="twitter:image" content="static/images/banner.png">
  <meta name="twitter:card" content="summary_large_image"> -->
  <!-- Keywords for your paper to be indexed by-->
  <meta name="keywords" content="Agent, Workflow, Generative, ComfyUI">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ComfyBench</title>
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>
</head>

<body>
  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">
              ComfyBench: Benchmarking LLM-based Agents in ComfyUI for Autonomously Designing Collaborative AI Systems
            </h1>
            <div class="is-size-5 publication-authors">
              <!-- Paper authors -->
              <span class="author-block">
                <a href="https://github.com/xxyqwq/" target="_blank">Xiangyuan Xue</a>,</span>
              <span class="author-block">
                <a href="https://github.com/whlzy/" target="_blank">Zeyu Lu</a>,</span>
              <span class="author-block">
                <a href="https://dihuang.me/" target="_blank">Di Huang</a>,</span>
              <span class="author-block">
                <a href="https://github.com/wzdthu/" target="_blank">Zidong Wang</a>,</span>
              <span class="author-block">
                <a href="https://wlouyang.github.io/" target="_blank">Wanli Ouyang</a>,</span>
              <span class="author-block">
                <a href="http://leibai.site/" target="_blank">Lei Bai</a><sup>*</sup></span>
            </div>

            <div class="is-size-5 publication-authors">
              <span class="author-block">Shanghai Artificial Intelligence Laboratory</span>
              <span class="eql-cntrb"><small><br><sup>*</sup>Corresponding Author</small></span>
            </div>

            <div class="column has-text-centered">
              <div class="publication-links">

                <!-- ArXiv abstract Link -->
                <span class="link-block">
                  <a href="https://arxiv.org/abs/2409.01392" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="ai ai-arxiv"></i>
                    </span>
                    <span>arXiv</span>
                  </a>
                </span>

                <!-- Arxiv PDF link -->
                <span class="link-block">
                  <a href="https://arxiv.org/pdf/2409.01392" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                    </span>
                    <span>Paper</span>
                  </a>
                </span>

                <!-- Github link -->
                <span class="link-block">
                  <a href="https://github.com/xxyQwQ/ComfyBench" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Teaser -->
  <section class="hero teaser">
    <div class="container is-max-desktop">
      <div class="hero-body">
        <img src="static/images/teaser.png" alt="Teaser Image" class="teaser-image">
        <div class="content has-text-justified">
          <p>
            (a) ComfyBench is a comprehensive benchmark to evaluate agents's ability to design collaborative AI systems
            in ComfyUI. Given the task instruction, agents are required to learn from documents and create workflows to
            describe collaborative AI systems. The performance is measured by <em>pass rate</em> and <em>resolve
              rate</em>, reflecting whether the workflow can be correctly executed and whether the task requirements are
            realized. (b) ComfyAgent builds collaborative Al systems in ComfyUI by generating workflows. The workflows
            are converted into equivalent code so that LLMs can better understand them. ComfyAgent can learn from
            existing workflows and autonomously design new ones. The generated workflows can be interpreted as
            collaborative AI systems to complete given tasks.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Image carousel -->
  <section class="section hero is-small is-light">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="content">
          <h2 class="title is-3">Gallery</h2>
          <div id="results-carousel" class="carousel results-carousel">
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">Generate an image of a rainy city street at night with
                reflections of neon signs on the wet pavement. The result should be a high-quality image.
              </p>
              <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
              <div style="text-align: center;">
                <img src="static/images/19_result.png" alt="Result" />
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">Generate an image of a hot air balloon floating over a
                scenic valley at sunrise. The result should be a high-quality image.
              </p>
              <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
              <div style="text-align: center;">
                <img src="static/images/21_result.png" alt="Result" />
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">Generate a 2-second video of a train
                running on a railway track through a countryside landscape. The result should be a high-quality video.
              </p>
              <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
              <div style="text-align: center;">
                <video autoplay controls muted loop>
                  <source src="static/videos/22_result.mp4" type="video/mp4">
                </video>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">Generate a 2-second video of the sun rising over a
                mountain range with mist in the valleys. The result should be a high-quality video.
              </p>
              <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
              <div style="text-align: center;">
                <video autoplay controls muted loop>
                  <source src="static/videos/23_result.mp4" type="video/mp4">
                </video>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a scribble flower. Repaint the
                scribble into a realistic red flower. The result should be an image of a red flower.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/09_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/09_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a red apple. Change it into a
                green apple on a table while maintaining other details. The result should be an image of a green apple.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/18_input.jpg" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/18_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a sample logo containing a
                containing a bird pattern. Convert it into a cubist art poster with dark colors. The result should be an
                image of a poster without watermark.</p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/17_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/17_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a large castle standing on top
                of a hill. Convert the castle into the style of ice cream while maintaining its original structure. The
                result should be an image with the castle transformed into a colorful and fantastic ice cream castle.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/12_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/12_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given a low-resolution photo of a crowd of
                people. Upscale the image by 4x. The result should be a high-resolution version of the image.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/13_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/13_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a table filled with dishes.
                Remove the fork on the table. The result should be a high-quality image without visible artifacts.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/14_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/14_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a red car parked on the
                street. Replace the tree behind the car with a white house. The result should be a high-quality image
                without visible artifacts.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/15_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/15_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a red bridge with a person
                standing on it. Remove the person from the image while maintaining the original appearance of the
                bridge. The result should be a high-quality image without visible artifacts.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/03_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/03_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given a photo of mountains and rivers with a
                visible watermark in the bottom right corner. Remove the watermark from the image while maintaining the
                quality and content of the original photo. The result should be a high-quality image without the
                watermark.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/11_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/11_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a girl playing the guitar.
                Generate an image of an old man playing the guitar in a forest with the same pose as the girl. The
                result should be a realistic image of an old man playing the guitar.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/07_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/07_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a man wearing a black
                jacket. Change the black jacket into a white hoodie while ensuring that the modification looks
                natural and realistic. The result should be a high-quality image of the man wearing a white hoodie.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/10_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/10_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a male celebrity. Transform
                the man in the image into a beautiful woman with ponytail hair while preserving her facial identity. The
                result should be a high-quality image of the woman.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/01_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/01_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a toy dog. Replace the
                background with a scene of a sunny park with green grass while keeping the lighting and shadows
                consistent. The result should be an image of the toy dog in the park scene.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/08_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/08_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of a standing cat. Replace the
                background with a scene of a cozy living room while keeping the lighting and shadows consistent. The
                result should be an image of the cat in the living room scene.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/02_input.png" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/02_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image containing two bottles of
                cosmetic products illuminated by a soft yellow light. Modify the illumination into a bright pink light
                to create a more vibrant and attractive appearance. The result should be an image of the cosmetic
                products with the new illumination.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/16_input.jpg" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <img src="static/images/16_result.png" alt="Result" />
                </div>
              </div>
            </div>
            <div class="item">
              <h2 class="subtitle has-text-centered" style="font-size: 1.2rem;">Task Instruction</h2>
              <p style="font-style: italic; font-size: 1.1rem;">You are given an image of the city of Budapest. Create a
                2-second video of the cityscape with the perspective changing based on the image. The result should be a
                high-quality video.
              </p>
              <div class="columns">
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Input</h3>
                  <img src="static/images/24_input.jpg" alt="Input" />
                </div>
                <div class="column">
                  <h3 class="subtitle has-text-centered" style="font-size: 1.2rem;">Result</h3>
                  <video autoplay controls muted loop>
                    <source src="static/videos/24_result.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section hero is-small">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column is-full">
            <div class="content">
              <h2 class="title is-3">Leaderboard</h2>
              <p>Notice: The score is defined as the overall resolve rate on ComfyBench.</p>
              <div class="level-set has-text-justified">
                <table>
                  <thead>
                    <tr>
                      <th
                        style="border: 1px solid #ddd; background-color: #f2f2f2; text-align: center; vertical-align: middle;">
                        Rank</th>
                      <th
                        style="border: 1px solid #ddd; background-color: #f2f2f2; text-align: center; vertical-align: middle;">
                        Agent</th>
                      <th
                        style="border: 1px solid #ddd; background-color: #f2f2f2; text-align: center; vertical-align: middle;">
                        Parameter</th>
                      <th
                        style="border: 1px solid #ddd; background-color: #f2f2f2; text-align: center; vertical-align: middle;">
                        Score</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">1</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        GPT-4o + ComfyAgent<br>
                        <a href="https://openai.com/index/hello-gpt-4o/" class="link">OpenAI, 2024</a><br>
                        <a href="https://arxiv.org/pdf/2409.01392" class="link">Xue et al., 2024</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt><br>
                        <tt>step_limitation = 5</tt><br>
                        <tt>debug_limitation = 1</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">32.50</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">2</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        o1-preview + RAG<br>
                        <a href="https://openai.com/index/introducing-openai-o1-preview/" class="link">OpenAI,
                          2024</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">32.50</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">3</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        GPT-4o + RAG<br>
                        <a href="https://openai.com/index/hello-gpt-4o/" class="link">OpenAI, 2024</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">26.50</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">4</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        Qwen-2.5-72B + RAG<br>
                        <a href="https://github.com/QwenLM/Qwen2.5" class="link">Qwen, 2024</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt><br>
                        <tt>step_limitation = 5</tt><br>
                        <tt>debug_limitation = 1</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">25.50</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">5</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        Llama-3.1-70B + ComfyAgent<br>
                        <a href="https://ai.meta.com/blog/meta-llama-3-1/" class="link">Meta, 2024</a><br>
                        <a href="https://arxiv.org/pdf/2409.01392" class="link">Xue et al., 2024</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt><br>
                        <tt>step_limitation = 5</tt><br>
                        <tt>debug_limitation = 1</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">24.00</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">6</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        InternLM-2.5-20B + RAG<br>
                        <a href="https://github.com/InternLM/InternLM" class="link">InternLM, 2024</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt><br>
                        <tt>step_limitation = 5</tt><br>
                        <tt>debug_limitation = 1</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">21.00</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">7</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        Llama-3.1-70B + RAG<br>
                        <a href="https://ai.meta.com/blog/meta-llama-3-1/" class="link">Meta, 2024</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">20.00</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">8</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        GPT-4o + CoT-SC<br>
                        <a href="https://openai.com/index/hello-gpt-4o/" class="link">OpenAI, 2024</a><br>
                        <a href="https://arxiv.org/abs/2203.11171" class="link">Wang et al., 2022</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_examples = 5</tt><br>
                        <tt>num_trajectories = 3</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">18.50</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">9</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        Mixtral-8x7B + RAG<br>
                        <a href="https://mistral.ai/news/mixtral-of-experts/" class="link">Mistral, 2023</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">17.00</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">10</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        GPT-4o + CoT<br>
                        <a href="https://openai.com/index/hello-gpt-4o/" class="link">OpenAI, 2024</a><br>
                        <a href="https://arxiv.org/abs/2201.11903" class="link">Wei et al., 2022</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_examples = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">17.00</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">11</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        GPT-4o + Few-shot<br>
                        <a href="https://openai.com/index/hello-gpt-4o/" class="link">OpenAI, 2024</a><br>
                        <a href="https://arxiv.org/abs/2005.14165" class="link">Brown et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_examples = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">16.00</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">12</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        o1-mini + RAG<br>
                        <a href="https://openai.com/index/introducing-openai-o1-preview/" class="link">OpenAI,
                          2024</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">12.00</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">13</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        Claude-3.5-Sonnet + RAG<br>
                        <a href="https://www.anthropic.com/news/claude-3-5-sonnet" class="link">Anthropic, 2024</a><br>
                        <a href="https://arxiv.org/abs/2005.11401" class="link">Lewis et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_references = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">8.50</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">14</td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        GPT-4o + Zero-shot<br>
                        <a href="https://openai.com/index/hello-gpt-4o/" class="link">OpenAI, 2024</a><br>
                        <a href="https://arxiv.org/abs/2005.14165" class="link">Brown et al., 2020</a>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">
                        <tt>num_examples = 5</tt>
                      </td>
                      <td style="border: 1px solid #ddd; text-align: center; vertical-align: middle;">0.00</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Abstract -->
  <section class="section hero is-light">
    <div class="container is-max-desktop">
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          <h2 class="title is-3">Abstract</h2>
          <div class="content has-text-justified">
            <p>
              Much previous AI research has focused on developing monolithic models to maximize their intelligence, with
              the primary goal of enhancing performance on specific tasks. In contrast, this work attempts to study
              using LLM-based agents to design collaborative AI systems autonomously. To explore this problem, we first
              introduce <strong>ComfyBench</strong> to evaluate agentsâ€™s ability to design collaborative AI systems in
              ComfyUI. ComfyBench is a comprehensive benchmark comprising 200 diverse tasks covering various
              instruction-following generation challenges, along with detailed annotations for 3,205 nodes and 20
              workflows. Based on ComfyBench, we further develop <strong>ComfyAgent</strong>, a novel framework that
              empowers LLM-based agents to autonomously design collaborative AI systems by generating workflows.
              ComfyAgent is based on two core concepts. First, it represents workflows with code, which can be
              reversibly converted into workflows and executed as collaborative systems by the interpreter. Second, it
              constructs a multi-agent system that cooperates to learn from existing workflows and generate new
              workflows for a given task. While experimental results demonstrate that ComfyAgent achieves a comparable
              resolve rate to o1-preview and significantly surpasses other agents on ComfyBench, ComfyAgent has resolved
              only 15% of creative tasks. LLM-based agents still have a long way to go in autonomously designing
              collaborative AI systems. Progress with ComfyBench is paving the way for more intelligent and autonomous
              collaborative AI systems.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section hero is-small">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column is-full">
          <div class="content">
            <h2 class="title is-3">ComfyBench: Benchmark Contents</h2>
            <div class="level-set has-text-justified">
              <p>
                ComfyBench is a comprehensive benchmark that includes:
              <ul>
                <li><strong>Node Documentation</strong> provides complete documentation for 3,205 nodes registered in
                  ComfyUI. This documentation provides detailed information about each node's usage, inputs, and
                  outputs, serving as an essential reference for agents.</li>
                <li><strong>Curriculum Workflow</strong> is a collection of 20 annotated tutorial workflows that
                  demonstrate common nodes and patterns for solving basic tasks in ComfyUI, helping agents learn useful
                  skills in a structured way.</li>
                <li><strong>Task Instruction</strong> serves as the core component consisting of 200 task instructions
                  that require designing and executing ComfyUI workflows. The tasks are divided into three difficulty
                  levels:</li>
                <ul>
                  <li><strong>Vanilla</strong> includes 100 tasks, which can be solved by learning from a single
                    demonstration with minor modifications.</li>
                  <li><strong>Complex</strong> includes 60 tasks, which require combining multiple curriculum workflows
                    and making adjustments.</li>
                  <li><strong>Creative</strong> includes 40 tasks, which require understanding core principles and
                    applying skills in novel ways.</li>
                </ul>
              </ul>
              If an additional image or video is involved in the task, it will be specified in the instruction.
              </p>
              <img src="static/images/comfybench.png" alt="ComfyBench Contents" class="center-image"
                style="width: 60%; margin: auto; display: block;" />
              <div class="container mt-4">
                <div class="alert alert-danger" role="alert">
                  ComfyBench provides annotations for 3205 nodes and 20 workflows, together with 200 task instructions
                  categorized into three difficulty levels: <em>vanilla</em>, <em>complex</em>, and <em>creative</em>,
                  reflecting the generalization ability of agents.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section hero is-small is-light">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column is-full">
          <div class="content">
            <h2 class="title is-3">ComfyBench: Evaluation Metrics</h2>
            <div class="level-set has-text-justified">
              <p>
                We design two metrics to evaluate the generated workflows in ComfyBench:
              <ul>
                <li><strong>Pass Rate</strong> measures whether the generated workflows are correct. It is evaluated by
                  the ComfyUI server. A task will be marked as passed only if the server finishes the execution process
                  and returns a success message.</li>
                <li><strong>Resolve Rate</strong> measures whether the generated workflows produce the expected results.
                  It is automatically evaluated using GPT-4o. A task will be marked as resolved only if the GPT-4o model
                  confirms that all the requirements are satisfied.</li>
              </ul>
              To verify the reliability of VLM-based evaluation, we conduct a human evaluation to analyze the agreement
              between human evaluators and GPT-4o. We randomly select 50 tasks that are completed by ComfyAgent, where
              human evaluators and GPT-4o are asked to provide their judgments respectively. We compute the average
              scores for each question under a sample size of 400 and conduct a correlation analysis, which indicates a
              strong agreement between human evaluators and GPT-4o.
              </p>
              <img src="static/images/alignment.png" alt="Human Alignment" class="center-image"
                style="width: 60%; margin: auto; display: block;" />
              <div class="container mt-4">
                <div class="alert alert-danger" role="alert">
                  Correlation analysis between the average scores given by human evaluators and GPT-4o indicates a
                  strong agreement.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section hero is-small">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column is-full">
          <div class="content">
            <h2 class="title is-3">ComfyAgent: Workflow Representation</h2>
            <div class="level-set has-text-justified">
              <p>
                There are four common formats to represent workflows:
              <ul>
                <li><strong>Flow graph</strong> provides intuitive visualization for humans but is unsuitable for LLM or
                  VLM processing.</li>
                <li><strong>JSON</strong> provides a structured representation but is limited by redundant information
                  and LLMs' context limitations.</li>
                <li><strong>Element list</strong> is closer to natural language and provides a more compact
                  representation, but it lacks explicit topological relationships, hindering LLMs from correctly
                  processing complex workflows.</li>
                <li><strong>Code</strong> emerges as the most effective representation, offering various advantages
                  including Turing completeness, rich semantic information, and natural compatibility with LLMs' code
                  generation capabilities.</li>
              </ul>
              We implement code representation using a restricted subset of Python-like syntax.
              </p>
              <img src="static/images/representation.png" alt="Workflow Representation" class="center-image" />
              <div class="container mt-4">
                <div class="alert alert-danger" role="alert">
                  Examples of four common formats to represent workflows: flow graph, JSON, element list, and code.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section hero is-small is-light">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column is-full">
          <div class="content">
            <h2 class="title is-3">ComfyAgent: Multi-Agent Framework</h2>
            <div class="level-set has-text-justified">
              <p>We propose ComfyAgent, a multi-agent framework consisting of three independent modules:
              <ul>
                <li><strong>Memory</strong> stores the recent state of ComfyAgent, which is formulated into three parts:
                  <ul>
                    <li><strong>History</strong> maintains recent plans and actions of Planner, enabling action review
                      for
                      subsequent planning.</li>
                    <li><strong>Reference</strong> stores information retrieved from the knowledge base, and can be
                      updated through active retrieval.</li>
                    <li><strong>Workspace</strong> contains the current workflow together with its natural language
                      annotation.</li>
                  </ul>
                </li>
                <li><strong>Planner</strong> serves as the core of ComfyAgent, providing the global scheme to design and
                  modify workflows:
                  <ul>
                    <li>At the beginning of the task, PlanAgent selects an existing workflow to initialize the memory
                      and
                      produces a thorough multi-step plan based on the task instruction.</li>
                    <li>For each step, PlanAgent produces a high-level plan, together with an action based on the
                      current
                      memory.</li>
                    <li>For each step, PlanAgent evaluates the completion status of the task. Once the task is deemed
                      completed, PlanAgent will finish the procedure and save the workflow.</li>
                  </ul>
                </li>
                <li><strong>Actions</strong> can be selected by PlanAgent. We define three actions as follows:
                  <ul>
                    <li><strong>Combine</strong> is processed by CombineAgent, combining the current workflow with
                      another
                      workflow from references.</li>
                    <li><strong>Adapt</strong> is processed by AdaptAgent, adapting the details of the current workflow
                      based on the prompt.</li>
                    <li><strong>Retrieve</strong> is processed by RetrieveAgent, retrieving relevant information and
                      updating references.</li>
                  </ul>
                  After combination or adaptation, the updated workflow will be checked and refined by RefineAgent.
                </li>
              </ul>
              After the action is processed, ComfyAgent will enter a new step, where PlanAgent updates the existing plan
              and forms a new action. The code representation will be finally converted into the standard format to
              describe the collaborative AI system.
              </p>
              <img src="static/images/comfyagent.png" alt="GenAgent Framework" class="center-image" />
              <div class="container mt-4">
                <div class="alert alert-danger" role="alert">
                  The architecture of the ComfyAgent framework. Multiple agents cooperate to design workflows in a
                  step-by-step manner.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section hero is-small">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column is-full">
          <div class="content">
            <h2 class="title is-3">Experiments: Evaluation Results</h2>
            <div class="level-set has-text-justified">
              <p>
                We conduct experiments on advanced LLMs, including Llama-3.1 (<code>llama-3.1-70b-instruct</code>),
                Claude-3.5 (<code>claude-3.5-sonnet-20240620</code>), GPT-4o (<code>gpt-4o-2024-08-06</code>), o1-mini
                (<code>o1-mini-2024-09-12</code>), and o1-preview (<code>o1-preview-2024-09-12</code>). We adopt five
                methods that are universally effective and can be conveniently adapted to solve the tasks in ComfyBench:
              <ul>
                <li><strong>Zero-shot Learning</strong> directly feeds LLMs with the task instruction to conduct
                  inference.</li>
                <li><strong>Few-shot Learning</strong> provides a set of demonstrations in the prompt, which utilizes
                  the in-context learning ability of LLMs.</li>
                <li><strong>Chain-of-Thought (CoT)</strong> instructs the agent to articulate the reasoning process
                  before providing the final answer.</li>
                <li><strong>CoT with Self-consistency (CoT-SC)</strong> ensembles parallel trajectories and then selects
                  the most consistent answer.</li>
                <li><strong>Retrieval-Augmented Generation (RAG)</strong> efficiently learns from the retrieved
                  demonstrations.</li>
              </ul>
              We evaluate the methods mainly on GPT-4o. ComfyAgent is also evaluated on Llama-3.1 to verify its
              performance on the open-source model. RAG is evaluated on all the models to provide a horizontal
              comparison of their capabilities.
              </p>
              <img src="static/images/evaluation.png" alt="Evaluation Result" class="center-image" />
              <div class="container mt-4">
                <div class="alert alert-danger" role="alert">
                  Evaluation results of all the baseline agents on ComfyBench. The pass rate and resolve rate of every
                  task category, together with the summary result on ComfyBench, are reported. The best results are
                  highlighted in bold.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section hero is-small is-light">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column is-full">
          <div class="content">
            <h2 class="title is-3">Experiments: Ablation Studies</h2>
            <div class="level-set has-text-justified">
              <p>
                We conduct ablation studies to verify two core designs of ComfyAgent:
              <ul>
                <li><strong>Representation</strong>: To verify the effectiveness of code representation, we implement
                  three variants of RAG on GPT-4o, where the workflows are respectively represented in JSON, element
                  list, and code.</li>
                <li><strong>Architecture</strong>: To verify the reasonability of the multi-agent framework, we
                  implement four variants of ComfyAgent on GPT-4o, each removing one agent from the original framework.
                </li>
              </ul>
              It turns out that RAG with code representation shows superior performance over other representations,
              and that removing any agent from ComfyAgent will lead to a significant performance degradation.
              </p>
              <img src="static/images/ablation.png" alt="Ablation Study" class="center-image" />
              <div class="container mt-4">
                <div class="alert alert-danger" role="alert">
                  Ablation results of RAG with different workflow representations and ComfyAgent with different
                  architectures on ComfyBench.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!--BibTex citation -->
  <section class="section" id="BibTeX">
    <div class="container is-max-desktop content">
      <h2 class="title">BibTeX</h2>
      <pre><code>@article{xue2024comfybench,
  title={ComfyBench: Benchmarking LLM-based Agents in ComfyUI for Autonomously Designing Collaborative AI Systems},
  author={Xue, Xiangyuan and Lu, Zeyu and Huang, Di and Wang, Zidong and Ouyang, Wanli and Bai, Lei},
  journal={arXiv preprint arXiv:2409.01392},
  year={2024}
}</code></pre>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-8">
          <div class="content">
            <p>
              This project page was built from <a href="https://github.com/eliahuhorwitz/Academic-project-page-template"
                target="_blank">Academic Project Page Template</a>.
              <br> This website is licensed under a <a rel="license"
                href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Commons
                Attribution-ShareAlike 4.0 International License</a>.
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Statcounter tracking code -->

  <!-- You can add a tracker to track page visits by creating an account at statcounter.com -->

  <!-- End of Statcounter Code -->

</body>

</html>